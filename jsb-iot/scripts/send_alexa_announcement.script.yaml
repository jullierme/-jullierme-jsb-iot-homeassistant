send_alexa_announcement:
  alias: Send Alexa Announcement
  fields:
    type:
      name: Type
      description: Select between either tts or announcement
      default: announce
  sequence:
    - service: homeassistant.update_entity
      data: {}
      target:
        entity_id: input_select.alexa_state
    - service: homeassistant.update_entity
      data: {}
      target:
        entity_id: input_text.announcement_text
    - service: notify.alexa_media
      data:
        target: '{{ states(''sensor.alexa_selector'') }}'
        message: '{{ states(''input_text.announcement_text'') }}'
        data:
          type: '{{ type }}'
  mode: single